# Задача минимум
Реализовать социальную сеть, в которой есть возможность обмена личными текстовыми сообщениями.

# Задача максимум
- Реализовать социальную сеть, в которой есть возможность обмена личными сообщениями сообщениями, создание групповых чатов отправка изображений и/или файлов.
- сообщения идут через очередь сообщения (rabbitMq) (сообщений может быть больше чем способна обработать система, поэтому, чтобы все не упало надо хранить сообщения в очереди. очередь разбирается в несколько потоков и сообщения доставляются адресатам)
- отправка уведомлений от сервера на клиент.
- unit тесты к приложению

# Технологии
### Этого набора зависимостей должно хватить на всех этапах разработки, нужно только добавить драйвер под реальную бд перед сдачей проекта.
* spring boot -- в качестве основного инфраструктурного фреймворка.
* spring security -- организация разделения доступа (никому не хочется чтобы его сообщения читали посторонние)
* spring data jpa -- ORM доступ к данным в бд
* amqp -- интеграция с очередью сообщения rabbit
* actuator -- позволяет получить некоторую информацию по работе приложения
* thymeleaf -- шаблонизатор для фронтенда
* devtools -- добавляет возможность hot deploy и еще много всего
* h2 -- инмемори бд, удобно при разработке
* log4j slf4j -- логировать только через логгеры и только в файлы

в файдле HELP.md есть сслыки на доки

# Требования к проекту
- mvc
- все пользователи должны регистрироваться в системе, пароли должны храниться в бд в зашифрованном виде. пользователь имеет доступ только к своим сообщениям.
- два вида пользователей разделенные ролями, роль user и роль admin. admin не может читать сообщения, но может забанить юзера.
- авторизованный пользователь может
  - получить список всех пользователей
  - искать по имени, возрасту, еще каким-то характеристикам
  - отправлять сообщения
  - список диалогов
  - при открытии диалога должна подгружаться история
  - жаловаться на других пользователей (админ может получить список на кого пожаловались, причины и забанить их)
  - если пользователя забанили он может авторизоваться, прочитать свои сообщения, может писать сообщения только админам.

# Чуть подробнее зачем нужна очередь сообщений
- допустим система может доставить 100 сообщений в минуту, пользователей много, больше 1000, и все они в одну минуту написали по 3 сообщения.
- сообщения начнут теряться, приложение начнет тормозить, пользователи не могут авторизоваться, не могут прочитать сообщения.
- если сообщения идет через очередь то нагрузка распределяется равномерно: мало сообщения - все быстро будут доставлены, много - все будут доставлены но с задержкой, при этом системы не тупит.
- особенно хорошо видно преимущество очереди если при отправке сообщения нужно его провалидировать (сходить в стороннюю систему, спросить, а нет ли чего запрещенного в тексте сообщения, если есть дело завести....)


# Заметки
* про warn во время запуска 
<code>
2019-04-10 13:54:39,355 WARN  [restartedMain] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
</code>

https://habr.com/ru/post/440734/

* посмотреть на проект с рабочим секьюрити можно тут https://github.com/Sergey34/news
  - https://github.com/Sergey34/news/blob/master/src/main/java/net/news/service/UserDetailServiceImpl.java
  - https://github.com/Sergey34/news/blob/master/src/main/java/net/news/service/UserDetailImpl.java
  - https://github.com/Sergey34/news/blob/master/src/main/java/net/news/Application.java#L40
* как получить хот редеплой:
  - запустить приложение
  - поменять класс, создать новый класс
  - нажать ctrl+9 или ctrl+shift+f9
  - все само перезапустится, обновит контекст, увидит новые файлы
* как начать работу:
  - нажать кнопку Fork справа вверху
  - дождаться окончания
  - войти в свой github, там будет форк этого репозитория в который можно коммитить и менять по своему усмотрению


